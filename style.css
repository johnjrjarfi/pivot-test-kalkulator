/* style.css â€” professional + motion design + responsive */

/* variables */
:root{
  /* Professional corporate palette: Deep blue + Modern teal */
  --bg:#f8fafc;
  --card:#ffffff;
  --muted:#64748b; /* Professional gray */
  --accent:#0f172a; /* Deep navy/charcoal */
  --accent-2:#0891b2; /* Professional teal */
  --line:#e2e8f0; /* Professional light gray */
  --text:#1e293b; /* Professional dark slate */
  --muted-2:#94a3b8;
  --shadow: 0 1px 3px rgba(0,0,0,0.08);
  --radius:8px;
  --ease:cubic-bezier(.25,.8,.25,1);
}

/* dark theme override */
:root.dark {
  --bg:#0f172a;
  --card:#1e293b;
  --muted:#cbd5e1;
  --line:rgba(255,255,255,0.08);
  --text:#ffffff;
  --shadow: 0 1px 3px rgba(0,0,0,0.3);
}

*{box-sizing:border-box}
html,body{height:100%}
:root{ --bg-gradient: linear-gradient(180deg, rgba(248,250,252,0.12), rgba(238,242,247,0.12)) }
body{
  margin:0;
  font-family: "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  background-image: linear-gradient(180deg, rgba(248,250,252,0.14), rgba(238,242,247,0.10)), url('asset/ini.jpg');
  background-size:cover;
  background-position:center;
  background-repeat:no-repeat;
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}
:root.dark body{
  background-image: linear-gradient(180deg, rgba(248,250,252,0.85), rgba(226,232,240,0.85)), url('asset/ini.jpg');
}

/* NAVBAR */
.navbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:12px 20px;
  background:linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,255,255,0.92));
  border-radius:0;
  border-bottom:1px solid var(--line);
  box-shadow:0 2px 8px rgba(0,0,0,0.06);
  position:sticky;
  top:0;
  z-index:99;
  backdrop-filter: blur(8px);
}
.logo{ display:flex; gap:12px; align-items:center; font-weight:900; color:var(--accent); font-size:16px; letter-spacing:-0.5px }
.logo-img{ width:36px; height:36px; flex-shrink:0; border-radius:4px; object-fit:cover; box-shadow:0 2px 6px rgba(0,0,0,0.08) }
.logo-text{ display:flex; flex-direction:column; gap:2px }
.logo-main{ font-weight:900; font-size:14px; color:var(--accent); letter-spacing:-0.5px }
.logo-sub{ font-weight:500; font-size:11px; color:var(--muted); letter-spacing:0.3px; text-transform:uppercase }
.nav-center{ display:flex; gap:16px; align-items:center }
.nav-link{ color:var(--muted); text-decoration:none; padding:8px 12px; border-radius:6px; font-weight:600; font-size:13px }
.nav-link{ transition:all 180ms var(--ease); }
.nav-link:hover{ color:var(--accent); background:rgba(8,145,178,0.06) }
.nav-link.active{ color:#fff; background:linear-gradient(135deg,var(--accent),var(--accent-2)); box-shadow:0 4px 12px rgba(8,145,178,0.15) }
.lang-select{ margin-right:12px; padding:8px 10px; border-radius:8px; border:1px solid var(--line); background:transparent; color:var(--accent); font-weight:600; cursor:pointer }
.lang-select option{ color:var(--text) }
.nav-right{ display:flex; gap:10px; align-items:center }
.lang-switch{ display:inline-flex; gap:8px; align-items:center; margin-right:8px }
.lang-btn{ background:transparent; border:1px solid transparent; padding:6px 8px; border-radius:8px; cursor:pointer; font-size:18px; line-height:1; display:inline-flex; align-items:center; justify-content:center; height:36px }
.lang-btn:hover{ background:rgba(8,145,178,0.06); border-color:var(--line) }
.lang-btn.active{ background:linear-gradient(135deg,var(--accent),var(--accent-2)); color:#fff; box-shadow:0 6px 18px rgba(8,145,178,0.12) }
/* focus styles for accessibility */
.lang-btn:focus{ outline:none; box-shadow:0 0 0 3px rgba(8,145,178,0.12); border-color:var(--accent-2) }
.lang-btn:focus-visible{ box-shadow:0 0 0 3px rgba(8,145,178,0.18); border-color:var(--accent-2) }

/* keyboard focus for interactive controls */
button:focus, .primary-btn:focus, .calc-btn:focus, .help-btn:focus, .export-btn:focus{ outline:none; box-shadow:0 0 0 3px rgba(8,145,178,0.08) }

/* language switch transition: fade content while translating */
.lang-changing .container{ opacity:0.45; transition:opacity 220ms ease }

/* flag image styling */
.flag-icon{ display:block; width:24px; height:16px; object-fit:cover }
.theme-toggle{ padding:7px 10px; border-radius:6px; border:1px solid var(--line); background:transparent; cursor:pointer; height:36px }
.theme-toggle{ display:inline-flex; gap:8px; align-items:center; padding:8px 10px; font-weight:700 }
.theme-toggle svg{ width:18px; height:18px; transition:transform 280ms var(--ease); }
.theme-toggle svg *{ stroke:var(--accent) }
.theme-toggle.rotate svg{ transform:rotate(40deg) }

/* container */
.container{ max-width:1180px; margin:28px auto; padding:0 18px }

/* titles & cards */
.section-title{ font-size:20px; margin:0 0 18px; font-weight:700; color:var(--accent) }
.card{ background:var(--card); border:1px solid var(--line); border-radius:var(--radius); padding:18px; box-shadow:var(--shadow); margin-bottom:18px }
/* lift cards on hover for emphasis */
.card{ transition:transform 220ms var(--ease), box-shadow 220ms var(--ease), border-color 220ms var(--ease) }
.card:hover{ transform:translateY(-2px); box-shadow:0 8px 20px rgba(0,0,0,0.08); border-color: var(--accent-2) }

/* layout for pivot */
.pivot-form{ display:flex; gap:12px; flex-wrap:wrap; align-items:end; max-width:760px }
.pivot-form label{ display:none } /* we use placeholders */
.pivot-form input{ padding:12px 14px; border-radius:8px; border:1px solid var(--line); width:150px; background:transparent; box-shadow:inset 0 1px 0 rgba(255,255,255,0.6); color:var(--text); font-weight:600; font-size:14px }
.pivot-form input[aria-invalid="true"]{ border-color:#ef4444; box-shadow:0 0 0 3px rgba(239,68,68,0.06) }
.primary-btn, .calc-btn{ padding:10px 16px; border-radius:6px; background:linear-gradient(135deg,var(--accent),var(--accent-2)); color:#fff; border:none; cursor:pointer; font-weight:700; letter-spacing:0.3px; box-shadow:0 4px 12px rgba(8,145,178,0.12); transition:transform 180ms var(--ease), box-shadow 180ms var(--ease), opacity 160ms var(--ease) }
.primary-btn:hover, .calc-btn:hover{ transform:translateY(-2px); box-shadow:0 6px 16px rgba(8,145,178,0.16) }
.primary-btn:active, .calc-btn:active{ transform:translateY(0) }

.pivot-table{ width:100%; border-collapse:collapse }
.pivot-table th, .pivot-table td{ padding:12px 10px; border-bottom:1px solid var(--line); text-align:center; font-size:14px }
.pivot-table td:first-child{ text-align:left; font-weight:800; color:var(--accent); width:80px }
.pivot-table td.value{ font-weight:600; color:var(--muted-2); }
.pivot-table tr:nth-child(even){ background: rgba(15,23,42,0.02) }

/* R (resistance) visual: top rows */
.pivot-table tr:nth-child(-n+4) td.value{ color: rgba(239,68,68,0.95); font-weight:700 }
/* Pivot central */
.pivot-table tr:nth-child(5) td:first-child{ color:var(--accent-2); }
.pivot-table tr:nth-child(5) td.value{ color:var(--accent); font-weight:800 }
/* S (support) visual: bottom rows */
.pivot-table tr:nth-child(n+6) td.value{ color: rgba(16,185,129,0.95); font-weight:700 }

/* default muted numbers when no results */
.pivot-results:not(.has-results) .pivot-table td.value{ color:var(--muted); font-weight:600; opacity:0.6 }
/* table header style */
.pivot-table thead th{ background:transparent; color:var(--muted); font-weight:700; font-size:12px; text-transform:uppercase; letter-spacing:0.5px }

/* history */
.history-top{ display:flex; justify-content:space-between; align-items:center; margin-bottom:12px; padding-bottom:12px; border-bottom:1px solid var(--line) }
.history-note{ font-size:12px; color:var(--muted); font-weight:500; letter-spacing:0.3px }
.select-inline{ padding:8px 10px; border-radius:6px; border:1px solid var(--line); background:var(--bg); cursor:pointer; font-size:13px }
.history-table{ width:100%; border-collapse:collapse; margin-bottom:12px }
.history-table th, .history-table td{ padding:12px; border-bottom:1px solid var(--line); font-size:14px }
.history-table thead th{ background:transparent; color:var(--muted); font-weight:700; font-size:12px; text-transform:uppercase; letter-spacing:0.5px }
.history-table tbody tr{ cursor:pointer; transition:all 160ms var(--ease) }
.history-table tbody tr:hover{ background:rgba(8,145,178,0.04) }
.row-delete-btn{ padding:4px 6px; background:#ef4444; color:#fff; border:none; border-radius:4px; cursor:pointer; font-weight:bold; font-size:12px; transition:opacity 160ms var(--ease) }
.row-delete-btn:hover:not(:disabled){ transform:scale(1.15); }
.row-delete-btn:disabled{ opacity:0.5; cursor:not-allowed }
.history-buttons{ display:flex; gap:10px; justify-content:flex-start }
.danger-btn{ padding:10px 16px; border-radius:6px; background:#ef4444; color:#fff; border:none; cursor:pointer; font-weight:700; box-shadow:0 4px 12px rgba(239,68,68,0.12); transition:transform 180ms var(--ease), box-shadow 180ms var(--ease) }
.danger-btn:hover{ transform:translateY(-2px); box-shadow:0 6px 16px rgba(239,68,68,0.16) }
.danger-btn:active{ transform:translateY(0) }
.undo-notification{ position:fixed; bottom:20px; right:20px; background:#ef4444; color:#fff; padding:12px 16px; border-radius:6px; box-shadow:0 12px 30px rgba(239,68,68,0.2); display:flex; gap:10px; align-items:center; animation:slideUp 300ms var(--ease); z-index:999 }
@keyframes slideUp{ from{ opacity:0; transform:translateY(20px) } to{ opacity:1; transform:none } }
.undo-btn{ padding:6px 12px; background:#fff; color:#ef4444; border:none; border-radius:4px; cursor:pointer; font-weight:bold; font-size:12px; transition:all 160ms var(--ease) }
.undo-btn:hover{ transform:scale(1.05); box-shadow:0 4px 12px rgba(0,0,0,0.15) }

/* fibonacci block layout */
.fib-block{ display:grid; grid-template-columns: 200px 320px 1fr; gap:18px; align-items:start }
.fib-left .trend-img{ width:100%; border-radius:6px; border:1px solid var(--line); object-fit:cover; transition:transform 260ms var(--ease) }
.fib-middle{ display:flex; flex-direction:column; gap:10px }
.fib-middle input{ padding:10px 12px; border-radius:6px; border:1px solid var(--line); background:var(--bg) }
.fib-right{ display:flex; gap:12px; align-items:flex-start }
.fib-table{ background:transparent; border-radius:6px; width:100%; max-width:320px; }
.fib-table table{ width:100%; border-collapse:collapse }
.fib-table th, .fib-table td{ padding:10px; border-bottom:1px solid var(--line); font-weight:700; font-size:13px }
.fib-table thead th{ text-align:left; color:var(--muted); font-size:12px; text-transform:uppercase; letter-spacing:0.5px }

/* disclaimer + footer */
.disclaimer{ margin-top:18px; padding:16px; background:#f8fafc; border-left:4px solid var(--accent-2); border-radius:6px; font-size:13px; color:var(--muted) }
:root.dark .disclaimer{ background:rgba(8,145,178,0.06); color:#cfeef8 }
.site-footer{ padding:28px 20px; margin-top:40px; background:linear-gradient(135deg, var(--accent), var(--accent-2)); border-radius:4px }
.footer-content{ display:flex; justify-content:center; align-items:center; gap:16px; flex-wrap:wrap }
.footer-brand{ font-weight:900; font-size:18px; color:#fff; letter-spacing:-0.5px }
.footer-link{ color:#fff; text-decoration:none; font-weight:600; font-size:14px; padding:8px 14px; border-radius:6px; transition:all 160ms var(--ease); border:1px solid rgba(255,255,255,0.3) }
.footer-link:hover{ background:rgba(255,255,255,0.15); border-color:rgba(255,255,255,0.6) }

/* MOTION (transitions & animations) */
.fade-up{ opacity:0; transform:translateY(12px); animation:fadeUp 420ms var(--ease) forwards }
@keyframes fadeUp{ to{ opacity:1; transform:none } }

.slide-left{ opacity:0; transform:translateX(-18px); animation:slideLeft 420ms var(--ease) forwards }
@keyframes slideLeft{ to{ opacity:1; transform:none } }

.slide-right{ opacity:0; transform:translateX(18px); animation:slideRight 420ms var(--ease) forwards }
@keyframes slideRight{ to{ opacity:1; transform:none } }

.reveal-row{ opacity:0; transform:translateY(12px); animation:revealRow 240ms var(--ease) forwards }
@keyframes revealRow{ to{ opacity:1; transform:none } }

/* micro interactions */
.trend-img:hover{ transform:scale(1.02); box-shadow:0 8px 16px rgba(0,0,0,0.08) }
input:focus{ outline:none; border-color:var(--accent-2); box-shadow:0 0 0 3px rgba(8,145,178,0.1) }

/* inputs */
input{ background:var(--bg) }
::placeholder{ color:var(--muted) }

/* AI CHAT WIDGET */
.ai-chat{ position:fixed; bottom:0; right:0; width:360px; height:520px; background:var(--card); border:1px solid var(--line); border-radius:8px 8px 0 0; box-shadow:0 20px 40px rgba(0,0,0,0.15); z-index:98; user-select:none; touch-action:none; transform:translateY(calc(100% - 48px)); transition:transform 300ms var(--ease); display:flex; flex-direction:column }
.ai-chat.open{ transform:translateY(0) }
.ai-header{ display:flex; justify-content:space-between; align-items:center; padding:14px 18px; background:linear-gradient(135deg,var(--accent),var(--accent-2)); color:#fff; cursor:grab; font-weight:700; font-size:14px; height:48px; flex-shrink:0; border-radius:8px 8px 0 0 }
.ai-header:active{ cursor:grabbing }
.ai-header::before{ content:'ðŸ¤–'; margin-right:8px; font-size:16px }
.ai-toggle{ padding:6px 12px; background:rgba(255,255,255,0.15); color:#fff; border:none; border-radius:4px; cursor:pointer; font-weight:bold; font-size:14px; transition:all 160ms var(--ease); width:32px; height:32px; display:flex; align-items:center; justify-content:center }
.ai-toggle:hover{ background:rgba(255,255,255,0.25) }
.ai-content{ display:flex; flex-direction:column; flex:1; overflow:hidden; background:var(--bg) }
.ai-messages{ flex:1; overflow-y:auto; padding:14px; display:flex; flex-direction:column; gap:12px; background:var(--bg) }
.ai-messages::-webkit-scrollbar{ width:6px }
.ai-messages::-webkit-scrollbar-track{ background:transparent }
.ai-messages::-webkit-scrollbar-thumb{ background:var(--line); border-radius:3px }
.ai-messages::-webkit-scrollbar-thumb:hover{ background:var(--muted) }
.ai-message{ display:flex; gap:8px; animation:fadeUp 300ms var(--ease) }
.ai-message.bot{ justify-content:flex-start }
.ai-message.user{ justify-content:flex-end }
.ai-avatar{ width:28px; height:28px; border-radius:6px; display:flex; align-items:center; justify-content:center; font-size:14px; flex-shrink:0 }
.ai-message.bot .ai-avatar{ background:rgba(8,145,178,0.2) }
.ai-message.user .ai-avatar{ background:rgba(15,23,42,0.2) }
.ai-text{ max-width:78%; padding:10px 12px; border-radius:8px; font-size:13px; line-height:1.5; word-wrap:break-word }
.ai-message.bot .ai-text{ background:rgba(8,145,178,0.08); color:var(--text); border-left:3px solid var(--accent-2); text-align:left }
.ai-message.user .ai-text{ background:linear-gradient(135deg,var(--accent),var(--accent-2)); color:#fff; text-align:right }
.ai-input-box{ display:flex; gap:8px; padding:12px; border-top:1px solid var(--line); flex-shrink:0; background:var(--card) }
.ai-input{ flex:1; padding:10px 12px; border:1px solid var(--line); border-radius:6px; font-size:13px; background:var(--bg); transition:border-color 160ms var(--ease) }
.ai-input:focus{ outline:none; border-color:var(--accent-2); box-shadow:0 0 0 3px rgba(8,145,178,0.1) }
.ai-send{ padding:10px 14px; background:linear-gradient(135deg,var(--accent),var(--accent-2)); color:#fff; border:none; border-radius:6px; cursor:pointer; font-weight:700; font-size:12px; transition:all 160ms var(--ease) }
.ai-send:hover{ transform:translateY(-2px); box-shadow:0 4px 12px rgba(8,145,178,0.2) }
.ai-send:active{ transform:translateY(0) }
.ai-chat.minimized .ai-content{ display:none }
.ai-chat.minimized{ height:auto; border-radius:8px }
.ai-chat.minimized .ai-header{ border-radius:8px }

/* responsive */
@media (max-width:640px){
  .ai-chat{ width:100%; right:0; left:0; bottom:0; border-radius:8px 8px 0 0 }
  /* make history & pivot results more mobile-friendly */
  .history-table thead{ display:none }
  .history-table tbody tr{ display:grid; grid-template-columns: 1fr 1fr; gap:8px; padding:10px; border-radius:8px; background:var(--card); box-shadow:var(--shadow); margin-bottom:8px }
  .history-table tbody tr td{ display:block; border-bottom:none; padding:6px 0 }
  .history-table tbody tr td:first-child{ grid-column:1 / -1; font-weight:700 }
  .pivot-table thead{ display:none }
  .pivot-table tbody tr{ display:grid; grid-template-columns: 1fr 1fr; gap:8px; padding:10px; border-radius:8px; background:var(--card); box-shadow:var(--shadow); margin-bottom:8px }
  .pivot-table td{ text-align:left }
  .pivot-table td:first-child{ font-weight:800 }
}

/* CARD HEADER & ACTIONS */
.card-header{ display:flex; justify-content:space-between; align-items:center; margin-bottom:16px; padding-bottom:12px; border-bottom:1px solid var(--line) }
.card-header h2{ margin:0; font-size:16px; color:var(--accent); font-weight:700 }
.card-actions{ display:flex; gap:8px }
.help-btn, .export-btn, .help-btn-inline{ padding:6px 10px; background:var(--bg); border:1px solid var(--line); border-radius:6px; cursor:pointer; font-weight:bold; font-size:13px; transition:all 160ms var(--ease) }
.help-btn:hover, .export-btn:hover, .help-btn-inline:hover{ background:var(--accent-2); color:#fff; border-color:var(--accent-2) }
.help-btn-inline{ padding:4px 8px; font-size:12px; margin-left:8px }
.section-title{ display:flex; align-items:center; gap:8px }

/* MARKET DATA */
.market-data{ display:flex; gap:12px; align-items:center; padding:8px 12px; background:rgba(8,145,178,0.04); border-radius:6px; border-left:3px solid var(--accent-2); margin-top:12px }
.data-label{ font-size:11px; color:var(--muted); text-transform:uppercase; font-weight:600; letter-spacing:0.5px }
.data-value{ font-size:13px; color:var(--accent-2); font-weight:700 }

/* MODAL */
.modal{ display:none; position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.5); z-index:999; align-items:center; justify-content:center }
.modal.show{ display:flex }
.modal-content{ background:var(--card); border-radius:8px; padding:24px; max-width:400px; width:90%; position:relative; box-shadow:0 20px 50px rgba(0,0,0,0.2); animation:slideUp 300ms var(--ease) }
.modal-close{ position:absolute; top:12px; right:12px; background:transparent; border:none; font-size:28px; color:var(--muted); cursor:pointer; transition:color 160ms var(--ease) }
.modal-close:hover{ color:var(--accent) }
.modal h3{ margin:0 0 14px; font-size:16px; color:var(--accent); font-weight:700 }
.help-text{ font-size:13px; color:var(--text); line-height:1.6 }
.help-text p{ margin:10px 0; }
.help-text strong{ color:var(--accent-2); font-weight:700 }

/* responsive */
@media (max-width:640px){
  .floating-calc{ bottom:15px; right:15px; width:280px }
}
@media (max-width:980px){
  .fib-block{ grid-template-columns: 160px 1fr; grid-template-rows: auto auto; }
  .fib-right{ grid-column: 1 / -1; display:flex; gap:8px; overflow:auto }
}
@media (max-width:640px){
  .pivot-form input{ width:100px }
  .container{ padding:0 14px }
  .fib-block{ grid-template-columns: 1fr; }
  .fib-right{ flex-direction:column }
  .navbar{ padding:10px; top:8px }
}

